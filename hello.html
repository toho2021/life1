<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv='cache-control' content='no-cache'>
  <title>Hello from LIFE</title>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="stylesheet.css">

<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

<script>

	function sendMessages() {
		// sendMessages call
		if (!liff.isInClient()) {
		    window.alert('This button is unavailable as LIFF is currently being opened in an external browser.');
		} else {
		    liff.sendMessages([
		        {
		            type: 'text',
		            text: 'ã“ã‚“ã«ã¡ã¯ğŸ˜„',
		        },
		    ])
		        .then(() => {
		            window.alert('Message sent');
		        })
		        .catch((error) => {
		            window.alert('Error sending message: ' + error);
		        });
		}
	}
	
	
	function hoge() {
		liff.getFriendship().then(data => {
		  if (data.friendFlag) {
			document.querySelector("#message").innerText = 'ã‚ãªãŸã¯ã€Œå‹ã ã¡ã€ã§ã™';
		  } else {
			document.querySelector("#message").innerText = 'ã‚ãªãŸã¯ã€Œå‹ã ã¡ã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“';
		  }
		});
	}
	
</script>

</head>

<body>
<h2>ã“ã‚“ã«ã¡ã¯ <span id="name"></span> ã•ã‚“</h2>
<h3><span id="message"></span></h3>

<input type='button' value="sendMessage" onclick="sendMessages()"/>
<input type='button' value="hoge" onclick="hoge()"/>

<script>
	// LIFFã®åˆæœŸåŒ–ã‚’è¡Œã†
	liff.init({
		// è‡ªåˆ†ã®LIFF IDï¼ˆURLã‹ã‚‰ã€https://liff.line.me/ã€ã‚’é™¤ã„ãŸæ–‡å­—åˆ—ï¼‰ã‚’å…¥åŠ›ã™ã‚‹
		liffId: "1656862002-q9jBBRWk"
	}).then(() => { // åˆæœŸåŒ–å®Œäº†. ä»¥é™ã¯LIFF SDKã®å„ç¨®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã§ãã‚‹

		// åˆ©ç”¨è€…ã®LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«åã‚’å–å¾—
		liff.getProfile().then(profile => {
			// ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å
			const name = profile.displayName
			// HTMLã«æŒ¿å…¥
			document.querySelector("#name").innerText = name
		})

		liff.getFriendship().then(data => {
		  if (data.friendFlag) {
			document.querySelector("#message").innerText = 'ã‚ãªãŸã¯ã€Œå‹ã ã¡ã€ã§ã™';
		  } else {
			document.querySelector("#message").innerText = 'ã‚ãªãŸã¯ã€Œå‹ã ã¡ã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“';
		  }
		});

	})


</script>

</body>
</html>
